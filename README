DEVELOPMENT SETUP

0) bundle install

1) Create development / test databases:
> rake db:create:all

2) Create dev partition tables:
# rake writer_partition:create column=page
# rake writer_partition:create column=domain 
# rake writer_partition:create column=keyphrase

2b) rake db:migrate

3) Create test data (need to start memcached on your machine first):
> memcached
> rake dev_seeds:fill
> (kill memcached if you want)

4) Test the dashboards for writer 1
> rails s --debug
	Visit: localhost:3000/test/1
	
DEVELOPMENT SETUP WITH TRACKING SYSTEM

1) Do the above steps

2) Start memcached:
> memcached

3) Start the redis server 
Make sure redis is installed and redis-server is in your path
> redis-server

4) Create a resque worker: 
> QUEUE=* rake resque:work

[
		To create a rescue worker with debug messages:
		> VVERBOSE=1 QUEUE=* rake resque:work

	 	To create multiple rescue workers:
	 	> COUNT=5 QUEUE=* rake resque:workers
		
 		Monitor rescue, visit: http://localhost:3000/resque - doh!
]

DEPLOYMENT / MANAGING SERVERS

Add server hosts to your ~/.ssh/config file as in 'doc/ssh_hosts.txt'

ssh into production machine:
	> ssh stats1
	> ssh stats2
	> ssh stats-db
	> ssh stats-db-slave
	
access live app:
	> cd /data/suite101/current
	> rails c production
	> rails db production (pass: 632bVy6Le3h9f, see deploy.rb)

deploy:
	> cap staging deploy
	> cap production deploy
	
	
	


